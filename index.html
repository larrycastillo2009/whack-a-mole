<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Whack-A-Mole</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <style type="text/css">* {cursor: url(https://cur.cursors-4u.net/others/oth-5/oth435.cur), auto !important;}</style><a href="http://www.cursors-4u.com/cursor/2009/09/02/hammer-6.html" target="_blank" title="Hammer"><img src="http://cur.cursors-4u.net/cursor.png" border="0" alt="Hammer" style="position:absolute; top: 0px; right: 0px;" /></a>
</head>
<body class="background">
<div class="container-fluid border" style="height: 100vh">
    <h1 class="text-center">Whack-A-Mole</h1>
    <div class="row">

        <div class="offset-1 col-2">
            <h2>Your Score:</h2>
            <h2 id="score">0</h2>
        </div>

        <div id="touch" class="row col-6" style="height: 75vh; width: 75vh">
            <div class="mole_hole border col-4 background-black ">a</div>
            <div class="mole_hole border col-4 background-black ">b</div>
            <div class="mole_hole border col-4 background-black ">c</div>
            <div class="mole_hole border col-4 background-black ">d</div>
            <div class="mole_hole border col-4 background-black ">e</div>
            <div class="mole_hole border col-4 background-black ">f</div>
            <div class="mole_hole border col-4 background-black ">g</div>
            <div class="mole_hole border col-4 background-black ">h</div>
            <div class="mole_hole border col-4 background-black ">i</div>
        </div>

        <div class="col-2 text-right">
            <h2>Time:</h2>
            <h2 id="time-left">60</h2>
        </div>

    </div>
    <div class="text-center m-5">
        <button id="start" class="btn btn-primary py-2 px-5">Start Game</button>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
<script>
    "use strict";
    const start = document.querySelector('#start')
    const square = document.querySelectorAll('.mole_hole');
    const mole = document.querySelectorAll('.mole');
    const timeLeft = document.querySelector('#time-left');
    let hitPosition = null;
    let score = document.querySelector('#score');
    let result = 0;
    let currentTime = timeLeft.textContent


    function randomSquare() {
        square.forEach(className => {
            className.classList.remove('mole')
            className.classList.add('background-black')
        })
        let randomPosition = square[Math.floor(Math.random() * 9)];
        randomPosition.classList.remove('background-black')
        randomPosition.classList.add('mole');

        hitPosition = randomPosition;

    }

    square.forEach(id => {
        id.addEventListener('mouseup', () => {
            console.log(id);
            if (id === hitPosition) {
                result = result + 1
                score.textContent = result
                id.classList.remove('mole');
                id.classList.add('background-black')
                let randomPosition = square[Math.floor(Math.random() * 9)];
                randomPosition.classList.remove('background-black')
                randomPosition.classList.add('mole');

                hitPosition = randomPosition;
            }
        })
    })

    function moveMole() {
        let timeId = null;
        timeId = setInterval(randomSquare, (Math.floor(Math.random() * 9)) * 500);
    }
    function countDown() {
        currentTime--;
        timeLeft.textContent = currentTime

        if (currentTime === 0) {
            clearInterval(timerId)
            alert('GAME OVER! Your final score is ' + result + ' Click OK to play again.')
        }
    }


    start.addEventListener('click', function () {
        let timerId = setInterval(countDown, 1000);

        if(timerId == 0){
            timeLeft.textContent= 60;
        }
    moveMole();
    countDown();
    this.disabled = true;

    })



</script>
</body>
</html>